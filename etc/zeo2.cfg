[buildout]
parts +=
    zeoserver
    client1
mountpoint = ${buildout:projectid}

[zeoserver]
recipe = plone.recipe.zope2zeoserver
zope2-location = ${zope2:location}
zeo-address = 8100
zeo-conf-additional =
    <filestorage ${buildout:projectid}>
        path ${buildout:directory}/var/filestorage/${buildout:projectid}.fs
    </filestorage>

[instance]
zeo-client = True
zeo-address = ${zeoserver:zeo-address}
zope-conf-additional +=
    <zodb_db ${buildout:projectid}>
        mount-point /${buildout:mountpoint}
        <zeoclient>
            server ${instance:zeo-address}
            storage ${buildout:projectid}
            name ${buildout:projectid}_zeostorage
        </zeoclient>
    </zodb_db>

[client1]
recipe = plone.recipe.zope2instance
http-address = 8081
zeo-client = True
zeo-address = ${zeoserver:zeo-address}
environment-vars = ${instance:environment-vars}
eggs = ${instance:eggs}
zope-conf-additional = ${instance:zope-conf-additional}
